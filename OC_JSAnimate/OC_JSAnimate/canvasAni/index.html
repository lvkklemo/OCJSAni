<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0"/>
            <title>Animm</title>
            
            <link rel="stylesheet" href="index.css"/>
            <link rel="stylesheet" href="base.css"/>
            <script src="DMMban.js"></script>
            
            <style>
                .canvasBox{
                    margin: 0 auto;
                    width: 100%;
                    height: 300px;
                }
            
            .arrayBox{
                text-align: center;
                margin-top: 20px;
            }
            </style>
            
    </head>
    <body>
        <div class="lk_layout">
            <div class="canvasBox">
                <canvas id="canvasElem">
                    你的浏览器不支持canvas，请升级浏览器
                </canvas>
            </div>
            <div class="arrayBox">
                <button id="btn-dir-left">←</button>
                <button id="btn-dir-right">→</button>
                <button id="btn-dir-up">↑</button>
                <button id="btn-dir-down">↓</button>
            </div>
        </div>
    </body>
    <script>
        
        window.onload=function(){
            
            var gWinHeight = document.body.clientHeight;
            var gWinWidth = document.body.clientWidth;
            <!--alert(gWinWidth + "," + gWinHeight);-->

            var canvasBox= document.getElementsByClassName('canvasBox')[0];
            var canvas= document.getElementById('canvasElem');
            var ctx = canvas.getContext('2d');
            canvas.width=gWinWidth-2;
            canvas.height=300;
            canvas.style.border='1px solid black';
            
            var man = new DMan({
                               x: gWinWidth*0.5-40,
                               y: 80,
                               w: 80,
                               h: 65*2,
                               fps: 4,
                               originW:40,
                               originH: 65,
                               imgUrl: 'DMMban.png'
                               });
                               
            man.render(ctx);
                               
                               
           var leftB = document.getElementById('btn-dir-left');
           leftB.onclick=function(){
               man.changeDirection('left');
               loadURL("haleyAction://left");
           };
           var rightB = document.getElementById('btn-dir-right');
           rightB.onclick=function(){
               man.changeDirection('right');
               loadURL("haleyAction://right");
           };
           var upB = document.getElementById('btn-dir-up');
           upB.onclick=function(){
               man.changeDirection('up');
               loadURL("haleyAction://up");
           };
           var downB = document.getElementById('btn-dir-down');
           downB.onclick=function(){
               man.changeDirection('down');
               loadURL("haleyAction://down");
           };
           
           
           function loadURL(url) {
               var iFrame;
               iFrame = document.createElement("iframe");
               iFrame.setAttribute("src", url);
               iFrame.setAttribute("style", "display:none;");
               iFrame.setAttribute("height", "0px");
               iFrame.setAttribute("width", "0px");
               iFrame.setAttribute("frameborder", "0");
               document.body.appendChild(iFrame);
               // 发起请求后这个iFrame就没用了，所以把它从dom上移除掉
               iFrame.parentNode.removeChild(iFrame);
               iFrame = null;

           };
        }
    
    
    
    </script>
</html>

<!--context.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);-->
<!--img 	规定要使用的图像、画布或视频。-->
<!--sx 	可选。开始剪切的 x 坐标位置。-->
<!--sy 	可选。开始剪切的 y 坐标位置。-->
<!--swidth 	可选。被剪切图像的宽度。-->
<!--sheight 	可选。被剪切图像的高度。-->
<!--x 	在画布上放置图像的 x 坐标位置。-->
<!--y 	在画布上放置图像的 y 坐标位置。-->
<!--width 	可选。要使用的图像的宽度。（伸展或缩小图像）-->
<!--height 	可选。要使用的图像的高度。（伸展或缩小图像）-->
